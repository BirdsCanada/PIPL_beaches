---
title: "ProcessingData"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

To Do:
-get a number for each beach that shows the amount of land within the buffer (exclude sea)
-finalize buffer size
-process landuse data
-reformat with physical data
-process survey data into format for analysis
-visualize
-pca of survey variables


currently calculating a percentage of the 30km buffer, but should recalculate to show what portion of that is land, and then calculate a percentage based on that.
```{r landuse plots}
ggplot(beachPhys, aes(tot_area_km, color = landclass))+ geom_histogram()+facet_wrap(~landclass, scales = "free")

ggplot(beachPhys, aes(landclass, tot_area_km, colour = landclass))+ geom_boxplot()+facet_wrap(~Region)
```

I want to widen beachPhys but cannot? pivot_wider is giving a weird error
```{r big dataset}
beachPhysW<-beachPhys %>% 
  pivot_wider(names_from = landclass, values_from = c(tot_area_km, tot_area, percentage)) %>% 
  select(-12,-17,-19,-22)

beachData<-full_join(prodData, beachPhysW, by = c('BeachID', 'Length_km', 'Region')) %>% 
  distinct()

#this may not be very useful
data<-full_join((piplSurvey %>% 
  select(name,year:day,19, 31:63) %>% 
  rename(BeachID = name, Year = year)), beachData,  by = c('BeachID', 'Year'))

ggplot(data, aes(x = BeachArea, y= Productivity, color = Region))+geom_point()
ggplot(data, aes(x = Length_km, y= Productivity, color = Region))+geom_point()

ggplot(data, aes(x = BeachArea, y= YE_pairs, color = Region))+geom_point()
ggplot(data, aes(x = Length_km, y= YE_pairs, color = Region))+geom_point()

ggplot(data, aes(dogs_unleashedTotal, Productivity))+geom_point()
ggplot(data, aes(dogs_leashedTotal, Productivity))+geom_point()
```













